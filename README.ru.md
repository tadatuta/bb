# BB

## Общая информация

Входные данные в папке content:
```
    config.json
        langs — используемые языки
        users — пользователи

        заголовок, подзаголовок, количество постов на странице

    pages — папка с {lang}.md, из которых генерируются страницы
    posts — папка с {lang}.md, из которых генерируются посты
        Поддерживают мета-информацию в YAML:
            ---
            title: Заголовок поста/страницы
            tags:
                - тег1
                - тег2
            ---
```
На выходе статика либо динамика в папке output.

## Уровни
    библиотеки: bem-core, bem-components
    базовые уровни: *.blocks
    опциональные уровни темы: themes/{тема}/*.blocks

## Сборка

### Контент
    grab.js собирает все content/*/*.md в output/data.json
### Ассеты
    bem make собирает один банд index на основе index.bemdecl.js
    generate.js на вход получает data.json + конфиг и генерирует bemtree->bemhtml->html
    
### Типы генерируемых страниц
* Страницы (каждый пост — это тоже страиница)
* Лента постов по дате, тегу, автору, категории (произвольному фильтру и сортировке)
* 404
* 500
* sitemap.xml

## development
    Нужен dev-сервер для разработки

## deploy
    Должна быть возможность автопубликации на gh-pages

## Использование
    Вебморда для написания и публикации контента

## Расширение
    Расширять исходный контекст, предоставляемый ядром можно через плагины. Минимальный плагин — это BEMTREE-шаблон по моде `plugins`, который добавляет свои данные в результат вызова предыдущих шаблонов по этой же моде:
    
```bemjson
    block('root').mode('plugins')(function() {
    var plugins = applyNext() || {};
        
    plugins.pluginName = 'someData';

    return plugins;
});
```
